## 第七章 网络编程

TCP 称为传输控制协议；<br />
UDP 称为用户数据包协议；<br />
HTTP 称为超文本传输协议；

UDP 与 TCP 最大的区别是，UDP 是面向无连接的，因此用于音频、视频传输；<br />
HTTP 是基于 TCP 会话，但本身并无会话的特点，同时具有无状态的特点；

#### 1. HTTP

HTTP 分为请求 request 和 response；

请求具有三层结构：请求行、请求头和请求体；

1. 请求行：请求方法 method，地址 url，请求版本 httpVersion;
2. 请求头：`key: value` 的格式；
3. 请求体：只读流对象；

响应同样具有三层结构：响应行、响应头和响应体；

#### 2. WebSocket

在 WebSocket 出现之前，客户端与服务端进行类似于长连接这种通信的方式主要借助 Comet 技术；

所谓 Comet 技术的细节就是采用长轮询或者是 iframe 流；

**长轮询**的原理就是：

客户端向服务端发起请求，服务端收到请求后不会立即返回数据，而是将请求挂起，比对需要返回的数据是否有更新，如果有更新则响应请求返回数据，如果没有更新则会被一直挂起至一定的时间后再返回；

而客户端在收到服务端的数据后进行处理，只有在处理完服务器返回的数据后，再次发送请求，建立连接；

这种好处在于，借助服务端对请求的挂起，起到了一定的延长请求时间的作用，减少了很多不必要的请求次数，但是同样的，请求挂起也会浪费资源；

#### 3. HTTPS

HTTPS 服务就是工作在 TLS/SSL 上的 HTTP；

TLS/SSL 是一个公钥/私钥的结构，它是一个非对称的加密结构；
当服务端发送数据给客户端时，服务端会用客户端的公钥加密，传输到客户端后，客户端用客户端私钥解密；
当客户端发送数据给服务端时，客户端会用服务端的公钥加密，传输到服务端后，服务端用服务端私钥解密；

TLS/SSL 还引入了数字证书 CA 来进行认证（应对中间人攻击）；